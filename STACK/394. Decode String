class Solution {
public:
    string decodeString(string s) {
        stack<string>stStr;
        stack<int>stNum;
        string curr = "";
        int num = 0;
        for(char c: s){
            if(isdigit(c)){
                num = num*10 + (c- '0');
            }
            else if(c == '['){
                stNum.push(num);
                stStr.push(curr);
                num = 0;
                curr = "";
            }
            else if(c==']'){
                int times = stNum.top();stNum.pop();
                string prev = stStr.top();stStr.pop();
                string temp = "";
                while(times--) temp += curr;
                curr = prev + temp;

            }
            else{
                curr += c;
            }
        }
        return curr;
        
    }
};